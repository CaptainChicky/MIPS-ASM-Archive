# Graphics Constants and Loading
# ------------------------
# Constants for sprite tilesets, tilemap tilesets, and palettes
# Includes graphics loading function and tile/palette data
# ------------------------

# ------------------------
# Sprite Tilesets - Paddle
# ------------------------
	.eqv PADDLE_TILESET_START 0 # Starting tile index for paddle tileset
	.eqv PADDLE_TILESET_SIZE 3 # Number of tiles in paddle tileset
	.eqv PADDLE_TILE_LEFT 0 # Tile index for left paddle piece
	.eqv PADDLE_TILE_MID 1 # Tile index for middle paddle piece
	.eqv PADDLE_TILE_RIGHT 2 # Tile index for right paddle piece
	.eqv PADDLE_FLAGS 0x01 # Flags for paddle sprite

# ------------------------
# Sprite Tilesets - Ball
# ------------------------
	.eqv BALL_TILESET_START 3 # Starting tile index for ball tileset
	.eqv BALL_TILESET_SIZE 1 # Number of tiles in ball tileset
	.eqv BALL_TILE 3 # Tile index for ball
	.eqv BALL_FLAGS 0x11 # Flags for ball sprite

# ------------------------
# Tilemap Tilesets
# ------------------------
	.eqv EMPTY_TILE 0 # Tile index for empty tile
	.eqv BLOCK_TILESET_START 1 # Starting tile index for block tileset
	.eqv BLOCK_TILESET_SIZE 2 # Number of tiles in block tileset
	.eqv BLOCK_TILE 1 # Tile index for block

# ------------------------
# Palettes - Paddle
# ------------------------
	.eqv PADDLE_PALETTE_START 0x00 # Starting palette index for paddle
	.eqv PADDLE_PALETTE_SIZE 6 # Number of colors in paddle palette

# ------------------------
# Palettes - Ball
# ------------------------
	.eqv BALL_PALETTE_START 0x10 # Starting palette index for ball
	.eqv BALL_PALETTE_SIZE 6 # Number of colors in ball palette

# ------------------------
# Palettes - Blocks
# ------------------------
	.eqv N_BLOCK_PALETTES 6 # Number of block palettes
	.eqv BLOCK_PALETTE_SIZE 5 # Number of colors in each block palette

.text

# ------------------------
# FUNCTION: load_game_graphics
# ------------------------
# Loads all game graphics (tilesets and palettes) into display memory
# Arguments: none
# Returns: none
load_game_graphics:
	push ra
	push s0

	# paddle graphics
	la a0, paddle_tileset
	li a1, PADDLE_TILESET_START
	li a2, PADDLE_TILESET_SIZE
	jal display_load_sprite_gfx

	la a0, paddle_palette
	li a1, PADDLE_PALETTE_START
	li a2, PADDLE_PALETTE_SIZE
	jal display_load_palette

	# ball graphics
	la a0, ball_tileset
	li a1, BALL_TILESET_START
	li a2, BALL_TILESET_SIZE
	jal display_load_sprite_gfx

	la a0, ball_palette
	li a1, BALL_PALETTE_START
	li a2, BALL_PALETTE_SIZE
	jal display_load_palette

	# block graphics but only one set of tiles, but 6 palettes on different rows
	la a0, block_tileset
	li a1, BLOCK_TILESET_START
	li a2, BLOCK_TILESET_SIZE
	jal display_load_tm_gfx

	li s0, 0
    # DO NOT FORMAT START
	_loop:
		la  a0, block_palettes
		mul t0, s0, BLOCK_PALETTE_SIZE
		mul t0, t0, 4
		add a0, a0, t0
		lbu a1, block_palette_starts(s0)
		li  a2, BLOCK_PALETTE_SIZE
		jal display_load_palette
		add s0, s0, 1
	blt s0, N_BLOCK_PALETTES, _loop

	pop s0
	pop ra
	jr ra
    # DO NOT FORMAT END

.data

# Starting palette indices for each block color
	block_palette_starts: .byte 0x20 0x30 0x40 0x50 0x60 0x70

# Paddle palette colors (6 colors: RGB hex values)
	paddle_palette:       .word
		0x000000 0x000000 0x464646 0xA2A2A2 0xD6D6D6 0xFFFFFF

# Ball palette colors (6 colors: RGB hex values)
	ball_palette:         .word
		0x000000 0x000000 0x464646 0xA2A2A2 0xD6D6D6 0xFFFFFF

# Block palette colors (6 palettes x 5 colors each: RGB hex values)
	block_palettes:       .word
		0x000000 0x630B0B 0x8B1717 0xCB4040 0xE27373 # red
		0x000000 0x63460B 0x8B6417 0xCB9D40 0xE2BD73 # yellow
		0x000000 0x2B630B 0x428B17 0x73CB40 0x9CE273 # green
		0x000000 0x0B3E63 0x175B8B 0x4091CB 0x73B4E2 # blue
		0x000000 0x3A0B63 0x55178B 0x8A40CB 0xAE73E2 # purple
		0x000000 0x630B44 0x8B1762 0xCB409A 0xE273BB # pink

# Paddle tileset (3 tiles: left, middle, right)
	paddle_tileset:       .byte
		#! Tile 0
		0x00 0x00 0x01 0x01 0x01 0x01 0x01 0x01
		0x00 0x01 0x05 0x05 0x05 0x05 0x05 0x05
		0x01 0x04 0x04 0x04 0x04 0x04 0x04 0x04
		0x01 0x03 0x03 0x03 0x03 0x03 0x03 0x03
		0x00 0x01 0x02 0x02 0x02 0x02 0x02 0x02
		0x00 0x00 0x01 0x01 0x01 0x01 0x01 0x01
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

		#! Tile 1
		0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x01
		0x05 0x05 0x05 0x05 0x05 0x05 0x05 0x05
		0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x04
		0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x03
		0x02 0x02 0x02 0x02 0x02 0x02 0x02 0x02
		0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x01
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

		#! Tile 2
		0x01 0x01 0x01 0x01 0x01 0x01 0x00 0x00
		0x05 0x05 0x05 0x05 0x05 0x05 0x01 0x00
		0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x01
		0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x01
		0x02 0x02 0x02 0x02 0x02 0x02 0x01 0x00
		0x01 0x01 0x01 0x01 0x01 0x01 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

	.align 2
# Ball tileset (1 tile)
	ball_tileset:         .byte
		#! Tile 0
		0x00 0x00 0x01 0x01 0x00 0x00 0x00 0x00
		0x00 0x01 0x04 0x03 0x01 0x00 0x00 0x00
		0x01 0x04 0x05 0x04 0x02 0x01 0x00 0x00
		0x01 0x03 0x04 0x03 0x02 0x01 0x00 0x00
		0x00 0x01 0x02 0x02 0x01 0x00 0x00 0x00
		0x00 0x00 0x01 0x01 0x00 0x00 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
		0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

	.align 2
# Block tileset (2 tiles: left and right halves)
	block_tileset:        .byte
		#! Tile 0
		0x02 0x04 0x04 0x04 0x04 0x04 0x04 0x04
		0x02 0x02 0x04 0x04 0x04 0x04 0x04 0x04
		0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
		0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
		0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
		0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
		0x02 0x02 0x01 0x01 0x01 0x01 0x01 0x01
		0x02 0x01 0x01 0x01 0x01 0x01 0x01 0x01

		#! Tile 1
		0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x02
		0x04 0x04 0x04 0x04 0x04 0x04 0x02 0x02
		0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
		0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
		0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
		0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
		0x01 0x01 0x01 0x01 0x01 0x01 0x02 0x02
		0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x02

.text
